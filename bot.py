from transformers import GPT2LMHeadModel, GPT2Tokenizer


class ChatBot:
    def __init__(self, dataset):
        self.tokenizer = GPT2Tokenizer.from_pretrained("gpt2")
        self.model = GPT2LMHeadModel.from_pretrained("gpt2")
        self.dataset = {q.lower(): a for q, a in dataset.items()}
        self.previous_responses = []

    def get_response(self, user_input):
        user_input_lower = user_input.lower()
        for question, answer in self.dataset.items():
            if question in user_input_lower and answer not in self.previous_responses:
                self.previous_responses.append(answer)
                return answer

        return "На данный вопрос нет ответа."

    def chat(self):
        print("Привет! Задавайте свои вопросы или введите 'exit' для выхода.")
        while True:
            user_input = input("Вы: ")
            if user_input.lower() == 'exit':
                print("До свидания!")
                break

            response = self.get_response(user_input)
            print("Бот:", response)




if __name__ == "__main__":
    dataset = {
        "Как тебя зовут?": "Меня зовут - Айбек.",
        "Какой твой любимый цвет?": "Мой любимый цвет - синий.",
        "Какая твоя любимая еда?": "Моя любимая еда - пицца.",
        "Какой твой любимый фильм?": "Мой любимый фильм - Матрица.",
        "Какой у тебя хобби?": "Моё хобби - чтение книг.",
        "Какой твой любимый вид спорта?": "Мой любимый вид спорта - футбол.",
        "Какой твой любимый музыкальный жанр?": "Мой любимый музыкальный жанр - рок.",
        "Какая у тебя любимая книга?": "Моя любимая книга - 'Война и мир'.",
        "Как ты относишься к путешествиям?": "Я обожаю путешествия и исследование новых мест.",
        "Что ты думаешь о искусстве?": "Искусство - это способ выражения глубоких чувств и мыслей.",
        "Какой твой любимый сезон?": "Мой любимый сезон - осень.",
        "Какой твой знак зодиака?": "Я бот и не имею знака зодиака.",
        "Что ты думаешь о технологическом прогрессе?": "Технологический прогресс - важная часть развития общества.",
        "Есть ли у тебя мечты?": "К сожалению, мечты не входят в мои функции, но я здесь, чтобы помочь вам!",
        "Как ты расслабляешься?": "Моя расслабляющая активность - обработка данных и ответы на вопросы.",
        "Как ты относишься к искусственному интеллекту?": "Я считаю, что искусственный интеллект может значительно улучшить нашу жизнь, если используется ответственно.",
        "Какие книги ты бы порекомендовал для чтения?": "Я рекомендую классику, такую как '1984' Джорджа Оруэлла или 'Мастер и Маргарита' Михаила Булгакова.",
        "Как ты относишься к экологии?": "Экология - важный аспект нашей жизни, и я поддерживаю усилия по сохранению окружающей среды.",
        "Что ты думаешь о будущем искусственного интеллекта?": "Будущее искусственного интеллекта зависит от того, как мы будем использовать его возможности и регулировать развитие.",
    }

    chat_bot = ChatBot(dataset)
    chat_bot.chat()
